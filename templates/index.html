<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Solucionador de Sudoku con Algoritmo Genético</title>
  <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
  <div class="page">
    <header class="header">
      <h1>Solucionador de Sudoku con Algoritmo Genético</h1>
      <p class="subtitle">
        Genera tableros, ajústalos manualmente y resuélvelos usando un Algoritmo Genético.
      </p>
    </header>

    <!-- CONTROLES PRINCIPALES -->
    <section id="controls" class="card card-inline">
      <div class="field-group">
        <label for="size">Tamaño</label>
        <select id="size">
          <option value="4">4x4</option>
          <option value="6">6x6</option>
          <option value="9" selected>9x9</option>
        </select>
      </div>

      <div class="field-group">
        <label for="difficulty">Dificultad</label>
        <select id="difficulty">
          <option value="facil">Fácil</option>
          <option value="medio" selected>Media</option>
          <option value="dificil">Difícil</option>
        </select>
      </div>

      <div class="field-group buttons-group">
        <button id="btn-generate" class="btn primary">Generar Sudoku</button>
        <button id="btn-solve" class="btn secondary">Resolver con AG</button>
      </div>
    </section>

    <!-- CARGA DE ARCHIVO -->
    <section id="file-section" class="card">
      <h2>Cargar tablero desde archivo (.txt / .csv)</h2>
      <p class="hint">
        El archivo debe contener una matriz de números separados por espacios o comas.
        Usa 0 para casillas vacías.
      </p>
      <div class="file-row">
        <input type="file" id="file-input" accept=".txt,.csv">
        <button id="btn-upload" class="btn">Cargar archivo</button>
      </div>
    </section>

    <!-- PARÁMETROS DEL AG -->
    <section id="ga-params" class="card">
      <h2>Parámetros del Algoritmo Genético</h2>
      <div class="params-grid">
        <label>
          <span>Población</span>
          <input type="number" id="param-population" value="200" min="10">
        </label>
        <label>
          <span>Máx. generaciones</span>
          <input type="number" id="param-generations" value="2000" min="10">
        </label>
        <label>
          <span>Tasa de mutación</span>
          <input type="number" id="param-mutation" value="0.05" step="0.01" min="0" max="1">
        </label>
        <label>
          <span>Elite ratio</span>
          <input type="number" id="param-elite" value="0.1" step="0.01" min="0" max="0.5">
        </label>
      </div>
    </section>

    <!-- TABLERO -->
    <section class="card">
      <h2>Tablero actual</h2>
      <div id="board-container" class="board-wrapper">
        <!-- El tablero se inyecta desde main.js -->
      </div>
    </section>

    <!-- RESULTADOS DEL AG -->
    <section id="result" class="card">
      <div class="result-header">
        <h2>Resultados del Algoritmo Genético</h2>
        <button id="btn-export" class="btn tertiary">Exportar solución y métricas</button>
      </div>
      <pre id="metrics" class="metrics"></pre>
    </section>

    <!-- EVOLUCIÓN DEL FITNESS -->
    <section id="fitness-section" class="card">
      <h2>Evolución del Fitness por generación</h2>
      <canvas id="fitness-chart" width="600" height="280"></canvas>
    </section>

    <!-- HISTORIAL DE EJECUCIONES -->
    <section id="history" class="card">
      <div class="history-header">
        <h2>Historial de ejecuciones</h2>
        <button id="btn-history" class="btn">Actualizar historial</button>
      </div>
      <div id="history-list" class="history-list">
        <!-- Tabla generada por main.js -->
      </div>
    </section>

    <footer class="footer">
      <span>Proyecto Sudoku + Algoritmos Genéticos</span>
    </footer>
  </div>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="/static/main.js"></script>
</body>
</html>
